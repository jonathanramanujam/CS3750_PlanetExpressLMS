@page "{id:min(1)}"
@using Microsoft.AspNetCore.Http
@using System.IO
@model CS3750_PlanetExpressLMS.Pages.Account.ProfileModel
@{
    ViewData["Title"] = "Profile";
    Layout = "../Shared/_GeneralLayout.cshtml";
}
     <div class="container">
        <main role="main" class="pb-3">
            <h1>Profile</h1>

            <form enctype="multipart/form-data" method="post">
                <div class="col-md-3">
                    <input hidden asp-for="User.ID"/>
                    <input hidden asp-for="User.Birthday"/>
                    <input hidden asp-for="User.IsInstructor"/>
                    <div class="form-group">
                        <label asp-for="FileUpload.FormFile" class="control-label"></label>
                        <div>
                            @if (Model.User.Image != null)
                            {
                                <img src="data:image/jpg;base64,@Html.Raw(Convert.ToBase64String(Model.User.Image))" alt="Profile Picture" height="150" />
                            }
                            else
                            {
                                @*Display a default image*@
                                <h2>NO Profile Picture</h2>
                            }
                        </div>
                        <br />
                        <input asp-for="FileUpload.FormFile" type="file"/>
                    </div>
                    <div class="form-group">
                        <label asp-for="User.FirstName" class="control-label"></label>
                        <input asp-for="User.FirstName" class="form-control" value="@Model.User.FirstName" />
                    </div>
                    <div class="form-group">
                        <label asp-for="User.LastName" class="control-label"></label>
                        <input asp-for="User.LastName" class="form-control" value="@Model.User.LastName" />
                    </div>
                    <div class="form-group">
                        <label asp-for="User.Bio" class="control-label"></label>
                        <textarea asp-for="User.Bio" class="form-control">@Model.User.Bio</textarea>
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Update Profile" class="btn btn-primary" />
                    </div>
                </div>
            </form>
        </main>
    </div>

    @section Scripts {
        @{
            await Html.RenderPartialAsync("_ValidationScriptsPartial");
        }
    }

